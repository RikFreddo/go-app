<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go</title>
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="stylesheet" href="style.css?v=0.20.3">
</head>
<body>

    <div class="top-bar" id="topBar" style="display:none;">
        <button onclick="goToHome()" class="icon-btn">üè† Home</button>
        <div style="display:flex; gap:10px;">
            <button onclick="showGlobalProgress()" class="icon-btn" id="btnProgress">üìä Cards</button>
            <button onclick="showSettingsMenu()" class="icon-btn">‚öôÔ∏è</button>
        </div>
    </div>

    <div id="main-menu" class="menu-overlay full-center">
        <div class="logo-container">
            <img src="icon.png" alt="Go Logo" class="app-logo">
            <h1 class="app-title">Go</h1>
        </div>
        <div class="menu-buttons">
            <button onclick="showConfigMenu()" class="main-btn primary-btn">üé¥ Flashcards</button>
            <button onclick="startSentenceMode()" class="main-btn" style="background-color:#9b59b6; color:white;">üìù Frasi</button>
            <button onclick="showSettingsMenu()" class="main-btn secondary-btn">‚öôÔ∏è Impostazioni</button>
        </div>
        <p class="footer-ver">v0.20 - IPA Edition</p>
    </div>

    <div id="settings-menu" class="menu-overlay full-center" style="display:none;">
        <div class="settings-panel">
            <h2>Impostazioni</h2>
            <div class="setting-group">
                <h3>Tema</h3>
                <div class="theme-switcher">
                    <button onclick="setTheme('light')" id="theme-light" class="theme-btn">‚òÄÔ∏è Light</button>
                    <button onclick="setTheme('dark')" id="theme-dark" class="theme-btn">üåô Dark</button>
                    <button onclick="setTheme('auto')" id="theme-auto" class="theme-btn">ü§ñ Auto</button>
                </div>
            </div>
            <div class="setting-group">
                <h3>Gestione Dati</h3>
                <div class="data-buttons">
                    <button onclick="exportData()" class="data-btn">‚¨áÔ∏è Esporta Backup</button>
                    <button onclick="document.getElementById('fileInput').click()" class="data-btn">‚¨ÜÔ∏è Importa Backup</button>
                    <button onclick="showUnlockMenu()" class="data-btn" style="background-color:#f39c12; color:white;">üîì Sblocca Tutto (Cheat)</button>
                    <button onclick="showResetMenu()" class="data-btn btn-danger">üóëÔ∏è Reset...</button>
                </div>
                <input type="file" id="fileInput" style="display:none" onchange="importData(this)">
            </div>
            <button onclick="goBack()" class="main-btn secondary-btn" style="margin-top:20px;">Indietro</button>
        </div>
    </div>

    <div id="config-menu" class="menu-overlay center-top" style="display:none;">
        <h1 style="margin-top: 60px;">Crea Sessione</h1>
        <div class="scroll-container">
            <div class="config-section"><h3>Argomenti</h3><div id="topic-options" class="options-grid"></div></div>
            <div class="config-section"><h3>Lingue</h3><div id="lang-options" class="options-grid"></div></div>
        </div>
        <button onclick="startCustomSession()" class="start-btn">INIZIA</button>
    </div>

    <div id="unlock-menu" class="menu-overlay center-top" style="display:none;">
        <h1 style="margin-top: 60px; color:#f39c12;">Sblocca Carte</h1>
        <div class="scroll-container">
            <div class="config-section"><h3>Argomenti</h3><div id="unlock-topic-options" class="options-grid"></div></div>
            <div class="config-section"><h3>Lingue</h3><div id="unlock-lang-options" class="options-grid"></div></div>
        </div>
        <button onclick="performUnlock()" class="start-btn" style="background-color:#f39c12;">SBLOCCA ORA</button>
        <button onclick="showSettingsMenu()" class="main-btn secondary-btn" style="margin-top:10px;">Annulla</button>
    </div>

    <div id="reset-menu" class="menu-overlay center-top" style="display:none;">
        <h1 style="margin-top: 60px; color:#e74c3c;">Reset Progressi</h1>
        <div class="scroll-container">
            <div class="config-section"><h3>Argomenti</h3><div id="reset-topic-options" class="options-grid"></div></div>
            <div class="config-section"><h3>Lingue</h3><div id="reset-lang-options" class="options-grid"></div></div>
        </div>
        <button onclick="performReset()" class="start-btn" style="background-color:#e74c3c;">CONFERMA RESET</button>
        <button onclick="showSettingsMenu()" class="main-btn secondary-btn" style="margin-top:10px;">Annulla</button>
    </div>

    <div id="progress-menu" class="menu-overlay center-top" style="display:none;">
        <div class="progress-header"><h2>Progressi Cards</h2><button onclick="closeProgress()" class="btn-close">X</button></div>
        <div class="stats-dashboard">
            <div class="stat-box"><span id="stat-total" class="stat-num">0</span><span class="stat-label">Totali</span></div>
            <div class="stat-box"><span id="stat-perfect" class="stat-num" style="color:#2ecc71;">0</span><span class="stat-label">Perfette</span></div>
            <div class="stat-box"><span id="stat-learning" class="stat-num" style="color:#f1c40f;">0</span><span class="stat-label">In Corso</span></div>
            <div class="stat-box"><span id="stat-locked" class="stat-num" style="color:#aaa;">0</span><span class="stat-label">Bloccate</span></div>
        </div>
        <div id="progress-list" class="progress-list-container"></div>
    </div>

    <div id="sent-progress-menu" class="menu-overlay center-top" style="display:none;">
        <div class="progress-header"><h2>Progressi Frasi</h2><button onclick="closeSentProgress()" class="btn-close">X</button></div>
        <p style="color:#666; font-size:0.9rem; margin-top:-10px;">Frasi completate correttamente</p>
        <div id="sent-progress-list" class="progress-list-container" style="margin-top:20px;"></div>
    </div>

    <div class="app-container" id="game-screen" style="display:none;">
        <header>
             <div class="header-row">
                <h1 id="deckTitle">Sessione</h1>
                <p id="deckStatus">Carte: 0</p>
            </div>
        </header>
        <div class="card-container">
            <div class="card" id="flashcard" onclick="flipCard()">
                <div class="card-front">
                    <span class="lang-tag" id="langTag">Lingua</span>
                    <h2 id="wordDisplay">...</h2>
                    <p class="hint">Tocca per girare</p>
                </div>
                <div class="card-back">
                    <div class="back-content">
                        <h2 id="backWordDisplay" class="back-word">...</h2>
                        <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 5px;">
                            <h3 id="pronunciationDisplay" style="margin: 0; color: #555;">...</h3>
                            <button onclick="speakWord(event)" class="audio-btn">üîä</button>
                        </div>
                        <p id="ipaDisplay" class="ipa-text" style="color:#888; font-family:'Courier New'; margin-top:-5px;">/ ... /</p>
                        
                        <p id="meaningDisplay">...</p>
                        <div id="typeTag" class="type-tag">...</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="controls-grid" id="controls">
            <button class="btn btn-red" onclick="handleResult('none')">Non so</button>
            <button class="btn btn-blue" onclick="handleResult('reading')">Lettura</button>
            <button class="btn btn-yellow" onclick="handleResult('meaning')">Senso</button>
            <button class="btn btn-green" onclick="handleResult('perfect')">Perfetto</button>
        </div>
        <p class="instruction" id="instructionText">Tocca la carta per vedere la soluzione</p>
    </div>

    <div class="app-container" id="sentence-screen" style="display:none;">
        <header>
            <div class="header-row">
                <h1>Frasi</h1>
                <button onclick="showSentenceProgress()" class="icon-btn" style="font-size:0.8rem;">üìä Stat</button>
            </div>
            <p id="sentStatus" style="text-align:left; color:#666; font-size:0.9rem;">Frasi disponibili: 0</p>
        </header>

        <div class="card-container">
            <div class="card" id="sentFlashcard" onclick="flipSentenceCard()">
                <div class="card-front" style="padding:20px;">
                    <span class="lang-tag" id="s_langTag">...</span>
                    <h2 id="s_wordDisplay" style="font-size: 2rem; line-height:1.4;">...</h2>
                    <p class="hint">Tocca per soluzione</p>
                </div>
                
                <div class="card-back">
                    <div class="back-content">
                        <h2 id="s_backWordDisplay" class="back-word" style="font-size: 1.8rem; line-height:1.3;">...</h2>
                        
                        <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 5px;">
                            <h3 id="s_pronunciationDisplay" style="margin: 0; color: #555; font-size:1rem;">...</h3>
                            <button onclick="speakSentenceAudio(event)" class="audio-btn">üîä</button>
                        </div>
                        
                        <p id="s_meaningDisplay" style="margin-top:15px; font-size:1.2rem;">...</p>
                        <div class="type-tag">FRASE REALE</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls-grid" id="sentControls">
            <button class="btn btn-red" onclick="handleSentenceResult('none')">Non so</button>
            <button class="btn btn-yellow" onclick="handleSentenceResult('hard')">Difficile</button>
            <button class="btn btn-green" onclick="handleSentenceResult('perfect')">Perfetto</button>
        </div>
        <p class="instruction" id="s_instructionText">Tocca per girare</p>
    </div>

    <script src="database.js?v=0.20.3"></script>
    <script src="script.js?v=0.20.3"></script>
    <script>
        // Funzione globale per l'audio delle parole singole (Flashcards)
        function speakWord(event) {
            event.stopPropagation();
            if (window.speakWordScript) window.speakWordScript();
        }
        // Funzione globale per l'audio delle frasi
        function speakSentenceAudio(event) {
            event.stopPropagation();
            if (window.speakSentenceScript) window.speakSentenceScript();
        }
    </script>
</body>
</html>
